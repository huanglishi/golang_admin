(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19a0b086","chunk-2f62fb8d"],{"04b1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layerbox"},[a("div",{staticClass:"table-box"},[a("a-table",{attrs:{columns:t.columns,dataSource:t.data,pagination:!1,rowKey:"id",loading:t.confirmLoading,bordered:""},scopedSlots:t._u([{key:"status",fn:function(e,i){return i.editable?t._e():a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关",defaultChecked:0!=e},on:{change:function(e){return t.onChangeshow(i.id,e)}}})}},t._l(["name","api","addprice","weigh"],(function(e,i){return{key:e,fn:function(n,r){return[r.editable?a("a-input",{key:e,staticStyle:{margin:"-5px 0"},attrs:{value:n,placeholder:t.columns[i].title},on:{change:function(a){return t.handleChange(a.target.value,r.id,e)}}}):[t._v(t._s(n))]]}}})),{key:"operation",fn:function(e,i){return[i.editable?[i.isNew?a("span",[a("a",{on:{click:function(e){return t.saveRow(i)}}},[t._v("添加")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否要删除此行？"},on:{confirm:function(e){return t.remove(i.id)}}},[a("a",[t._v("删除")])])],1):a("span",[a("a",{on:{click:function(e){return t.saveRow(i)}}},[t._v("保存")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.cancel(i.id)}}},[t._v("取消")])],1)]:a("span",[a("a",{on:{click:function(e){return t.toggle(i.id)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否要删除此行？"},on:{confirm:function(e){return t.remove(i.id)}}},[a("a",[t._v("删除")])]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.editDes(i.id)}}},[t._v("描述")])],1)]}}],null,!0)}),a("a-button",{staticStyle:{width:"100%","margin-top":"16px","margin-bottom":"8px"},attrs:{type:"dashed",icon:"plus"},on:{click:t.newMember}},[t._v("新增")])],1)])},n=[],r=a("2909"),o=a("5530"),s=(a("d3b7"),a("4de4"),a("25f0"),a("7db0"),a("b0c0"),a("159b"),a("b64b"),a("8ded")),d=a.n(s),l=a("f496"),c=[{title:"名称",dataIndex:"name",key:"name",width:"25%",scopedSlots:{customRender:"name"}},{title:"数据",dataIndex:"api",key:"api",width:"25%",scopedSlots:{customRender:"api"}},{title:"增加价",dataIndex:"addprice",key:"addprice",width:"13%",scopedSlots:{customRender:"addprice"}},{title:"排序",dataIndex:"weigh",key:"weigh",width:"8%",scopedSlots:{customRender:"weigh"}},{title:"状态",dataIndex:"status",key:"status",width:"10%",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",scopedSlots:{customRender:"operation"}}],u={name:"VersionList",components:{},data:function(){return this.columns=c,{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,data:[],fitem:null}},props:{layerid:{type:String,default:""},lydata:{type:Object,default:function(){return{}}},lyoption:{type:Object,default:function(){return{}}}},created:function(){var t=this;this.lydata.data&&(this.fitem=this.lydata.data,this.confirmLoading=!0,this.$request({url:"developer/module/getversion",method:"get",params:{mcid:this.fitem.id}}).then((function(e){t.data=e.data})).catch((function(t){})).finally((function(){t.confirmLoading=!1}))),this.all_layerid=d.a.get("layerid"),this.all_layerid||(this.all_layerid=[]),this.all_layerid.push(this.layerid),d.a.set("layerid",this.all_layerid,864e5)},methods:{editDes:function(t){this.$layer.iframe({content:{content:l["default"],parent:this,data:{data:t||null}},offset:["auto",430],area:["700px","500px"],title:"功能描述",maxmin:!0,shade:!1,shadeClose:!1,resize:!0,cancel:function(t){var e=d.a.get("layerid");e&&e.length>0&&(e=e.filter((function(e){return e!=t})),d.a.set("layerid",e,864e5))}})},newMember:function(){var t=this.data.length,e=0===t?"1":(parseInt(this.data[t-1].id)+1).toString();this.data.push({id:e,name:"",api:"",addprice:"",weigh:e,status:1,editable:!0,isNew:!0})},remove:function(t){var e=this,a=this.data.find((function(e){return e.id===t}));if(a.isNew){var i=this.data.filter((function(e){return e.id!==t}));this.data=i}else this.confirmLoading=!0,this.$request({url:"developer/module/delversion",method:"delete",data:{id:t}}).then((function(a){if(0==a.code){var i=e.data.filter((function(e){return e.id!==t}));e.data=i,e.$message.success(a.msg)}else e.$message.error(a.msg)})).catch((function(t){e.$message.error("网络错误，请稍后再试")})).finally((function(){e.confirmLoading=!1}))},saveRow:function(t){var e=this;this.confirmLoading=!0;t.id;var a=t.name,i=t.weigh;if(!a||!i)return this.confirmLoading=!1,void this.$message.error("请填写完整信息。");t.isNew&&(t.id=0),t.mcid=this.fitem.id,this.$request({url:"developer/module/addversion",method:"post",data:t}).then((function(a){if(0==a.code){e.$message.success(a.msg);var i=e.data.find((function(e){return e.id===t.id}));i.editable=!1,i.id=a.data}else e.$message.error(a.msg)})).catch((function(t){})).finally((function(){e.confirmLoading=!1}))},toggle:function(t){var e=this.data.find((function(e){return e.id===t}));e._originalData=Object(o["a"])({},e),e.editable=!e.editable},getRowByKey:function(t,e){var a=this.data;return(e||a).find((function(e){return e.id===t}))},cancel:function(t){var e=this.data.find((function(e){return e.id===t}));Object.keys(e).forEach((function(t){e[t]=e._originalData[t]})),e._originalData=void 0},handleChange:function(t,e,a){var i=Object(r["a"])(this.data),n=i.find((function(t){return e===t.id}));n&&(n[a]=t,this.data=i)},onChangeshow:function(t,e){var a=this,i=this.$message.loading("状态修改中..",0);this.$request({url:"developer/module/upversion",method:"post",data:{status:e?1:0,id:t}}).then((function(t){0==t.code?a.$message.success(t.msg):a.$message.error(t.msg)})).catch((function(t){})).finally((function(){setTimeout(i,1)}))}}},f=u,m=(a("e03a"),a("2877")),h=Object(m["a"])(f,i,n,!1,null,"b62bdefc",null);e["default"]=h.exports},2503:function(t,e,a){"use strict";a("e08b")},2909:function(t,e,a){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function n(t){if(Array.isArray(t))return i(t)}a.d(e,"a",(function(){return d}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}a("fb6a"),a("b0c0");function o(t,e){if(t){if("string"===typeof t)return i(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){return n(t)||r(t)||o(t)||s()}},e03a:function(t,e,a){"use strict";a("f660")},e08b:function(t,e,a){},f496:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layerbox"},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[a("a-form-item",{staticClass:"roiders",attrs:{hasFeedback:""}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["des",{initialValue:t.savedata.des}],expression:"['des', {initialValue:savedata.des}]"}],attrs:{rows:15,placeholder:"请输入功能描述"}})],1),a("a-form-item",{staticStyle:{"text-align":"center","margin-top":"12px"},attrs:{wrapperCol:{span:24}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[t._v(t._s(t.$t("form.basic-form.form.submit")))]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.onReset}},[t._v(t._s(t.$t("form.basic-form.form.reset")))])],1)],1)],1)],1)},n=[],r=(a("d3b7"),a("4de4"),a("8ded")),o=a.n(r),s={name:"VersionDes",components:{},data:function(){return{confirmLoading:!1,form:this.$form.createForm(this),catelist:[],savedata:{pid:"",name:"",status:0,des:""},id:0}},props:{layerid:{type:String,default:""},lydata:{type:Object,default:function(){return{}}},lyoption:{type:Object,default:function(){return{}}}},created:function(){if(this.lydata.data){var t=this.lydata.data;this.id=t,this.getdata(t)}this.all_layerid=o.a.get("layerid"),this.all_layerid||(this.all_layerid=[]),this.all_layerid.push(this.layerid),o.a.set("layerid",this.all_layerid,864e5)},methods:{getdata:function(t){var e=this;this.confirmLoading=!0,this.$request({url:"developer/module/getversiondes",method:"get",params:{id:t}}).then((function(t){e.form.setFieldsValue({des:t.data})})).catch((function(t){})).finally((function(){e.confirmLoading=!1}))},onReset:function(){this.form.resetFields()},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){t||(e.confirmLoading=!0,a["id"]=e.id,e.$request({url:"developer/module/upversiondes",method:"post",data:a}).then((function(t){0==t.code?(e.$message.success(t.msg),e.$layer.close(e.layerid),e.all_layerid&&e.all_layerid.length>0&&(e.all_layerid=e.all_layerid.filter((function(t){return t!=e.layerid})),o.a.set("layerid",e.all_layerid,864e5))):e.$message.error(t.msg)})).catch((function(t){})).finally((function(){e.confirmLoading=!1})))}))}}},d=s,l=(a("2503"),a("2877")),c=Object(l["a"])(d,i,n,!1,null,"3d26ebba",null);e["default"]=c.exports},f660:function(t,e,a){}}]);