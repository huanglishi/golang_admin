(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca15762c","chunk-ba538150"],{"17f1":function(e,t,a){"use strict";a("ea22")},7877:function(e,t,a){},8080:function(e,t,a){"use strict";a("7877")},"8bf8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layerbox"},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{staticClass:"roiders",attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"选择父级","has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pid",{rules:[{required:!0,message:"请输入至少1个字符的菜单名称！"}]}],expression:"['pid', {rules: [{required: true, message: '请输入至少1个字符的菜单名称！'}]}]"}],attrs:{placeholder:"选择上一级菜单"}},[a("a-select-option",{key:0,attrs:{value:0}},[e._v("无")]),e._l(e.list,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[a("span",{domProps:{innerHTML:e._s(t.title_txt)}})])}))],2)],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"是否为菜单",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["ismenu"],expression:"['ismenu']"}],on:{change:e.onIsmenu}},[a("a-radio",{attrs:{value:0}},[e._v("不是")]),a("a-radio",{attrs:{value:1}},[e._v("是")])],1)],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}]},[a("a-radio",{attrs:{value:"menu"}},[e._v("菜单")]),a("a-radio",{attrs:{value:"file"}},[e._v("权限节点")])],1)],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"标题（title）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,min:1,message:"请输入至少1个字符的菜单名称！"}]}],expression:"['title', {rules: [{required: true, min: 1, message: '请输入至少1个字符的菜单名称！'}]}]"}]})],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"路由名（name）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{pattern:/^[A-Za-z0-9_\-]+$/gi,required:!0,message:"输入只能是数字、字母、下划线"}]}],expression:"['name', {rules: [{pattern: /^[A-Za-z0-9_\\-]+$/ig,required: true, message: '输入只能是数字、字母、下划线'}]}]"}]})],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"页面组件（component）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["component",{rules:[{pattern:/^[A-Za-z0-9_\-_\/_@]+$/gi,message:"输入只能是数字、字母、下划线"}]}],expression:"['component', {rules: [\n          {pattern: /^[A-Za-z0-9_\\-_\\/_@]+$/ig, message: '输入只能是数字、字母、下划线'}]}]"}]})],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"重定向（redirect）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["redirect",{rules:[{pattern:/^[A-Za-z0-9_\-_\/_@]+$/gi,message:"输入只能是数字、字母、下划线"}]}],expression:"['redirect', {rules: [\n          {pattern: /^[A-Za-z0-9_\\-_\\/_@]+$/ig, message: '输入只能是数字、字母、下划线'}]}]"}]})],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"图标（icon）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{rules:[{pattern:/^[A-Za-z0-9_\-_-]+$/gi,message:"输入只能是数字、字母、下划线"}]}],expression:"['icon', {rules: [{pattern: /^[A-Za-z0-9_\\-_-]+$/ig, message: '输入只能是数字、字母、下划线'}]}]"}]})],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"页面是否缓存",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["keepAlive"],expression:"['keepAlive']"}]},[a("a-radio",{attrs:{value:0}},[e._v("不需缓存")]),a("a-radio",{attrs:{value:1}},[e._v("缓存")])],1)],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"子路由（hideHeader）",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hideHeader"],expression:"['hideHeader']"}]},[a("a-radio",{attrs:{value:1}},[e._v("设置")]),a("a-radio",{attrs:{value:0}},[e._v("不设置")])],1)],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"hiddenHeaderContent",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"隐藏 PageHeader 组件中的页面带的 面包屑和页面标题栏"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hiddenHeaderContent"],expression:"['hiddenHeaderContent']"}]},[a("a-radio",{attrs:{value:1}},[e._v("设置")]),a("a-radio",{attrs:{value:0}},[e._v("不设置")])],1)],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"子路由hideChildrenInMenu",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"用于隐藏不需要在菜单中展示的子路由。用法可以查看 个人设置 的配置"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hideChildrenInMenu"],expression:"['hideChildrenInMenu']"}]},[a("a-radio",{attrs:{value:1}},[e._v("设置")]),a("a-radio",{attrs:{value:0}},[e._v("不设置")])],1)],1),a("a-form-item",{staticClass:"roiders",attrs:{label:"子路由（hidden）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"控制路由和子路由是否显示在 sidebar"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hidden"],expression:"['hidden']"}]},[a("a-radio",{attrs:{value:1}},[e._v("设置")]),a("a-radio",{attrs:{value:0}},[e._v("不设置")])],1)],1),a("a-form-item",{staticClass:"roiders",attrs:{label:e.$t("form.basic-form.remark"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:"3",placeholder:e.$t("form.basic-form.remark")}})],1),a("a-form-item",{staticStyle:{"text-align":"center","margin-top":"12px"},attrs:{wrapperCol:{span:24}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v(e._s(e.$t("form.basic-form.form.submit")))]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.onReset}},[e._v(e._s(e.$t("form.basic-form.form.reset")))])],1)],1)],1)],1)},r=[],s=(a("b0c0"),a("d3b7"),a("4de4"),a("8ded")),n=a.n(s),l=a("4360"),o={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),list:[],savedata:{pid:null,type:"menu",ismenu:1,title:"",name:"",component:"",redirect:"",icon:"",keepAlive:0,hideHeader:0,hiddenHeaderContent:0,hideChildrenInMenu:0,hidden:0,remark:""},id:0,all_layerid:[]}},props:{layerid:{type:String,default:""},lydata:{type:Object,default:function(){return{}}},lyoption:{type:Object,default:function(){return{}}}},created:function(){var e=this;if(this.getdata(),this.lydata.data){var t=this.lydata.data;this.$nextTick((function(){e.id=t.id,e.form.setFieldsValue({pid:t.pid,type:t.type,ismenu:t.ismenu,title:t.title,name:t.name,component:t.component,redirect:t.redirect,icon:t.icon,keepAlive:t.keepAlive,hideHeader:t.hideHeader,hiddenHeaderContent:t.hiddenHeaderContent,hideChildrenInMenu:t.hideChildrenInMenu,hidden:t.hidden,remark:t.remark})}))}else{var a=0;this.lydata.cid>0&&(a=this.lydata.cid),this.$nextTick((function(){e.form.setFieldsValue({pid:a,type:"menu",ismenu:1,title:"",name:"",component:"",redirect:"",icon:"",keepAlive:0,hideHeader:0,hiddenHeaderContent:0,hideChildrenInMenu:0,hidden:0,remark:""})}))}this.all_layerid=n.a.get("layerid"),this.all_layerid||(this.all_layerid=[]),this.all_layerid.push(this.layerid),n.a.set("layerid",this.all_layerid,864e5)},methods:{getdata:function(){var e=this;this.$request({url:"/auth/rule/getparent",method:"get"}).then((function(t){e.list=t.data})).catch((function(e){})).finally((function(){}))},onReset:function(){this.form.resetFields(),this.form.setFieldsValue({pid:0,type:"menu",ismenu:1,title:"",name:"",component:"",redirect:"",icon:"",keepAlive:0,hideHeader:0,hiddenHeaderContent:0,hideChildrenInMenu:0,hidden:0,remark:""})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||(t.confirmLoading=!0,a["id"]=t.id,t.$request({url:"/auth/rule/add",method:"post",data:a}).then((function(e){0==e.code?(t.$message.success(e.msg),t.upmenu(),t.$layer.close(t.layerid),t.all_layerid&&t.all_layerid.length>0&&(t.all_layerid=t.all_layerid.filter((function(e){return e!=t.layerid})),n.a.set("layerid",t.all_layerid,864e5)),t.$parent.reflesh()):t.$message.error(e.msg)})).catch((function(e){})).finally((function(){t.confirmLoading=!1})))}))},upmenu:function(){l["a"].dispatch("GetInfo").then((function(e){l["a"].dispatch("GenerateRoutes",{roles:e}).then((function(){}))})).catch((function(e){notification.error({message:"错误",description:"请求用户信息失败，请重试，"+e})}))},onIsmenu:function(e){0==e.target.value?this.form.setFieldsValue({type:"file"}):this.form.setFieldsValue({type:"menu"})}}},d=o,c=(a("17f1"),a("2877")),u=Object(c["a"])(d,i,r,!1,null,"6eb2f106",null);t["default"]=u.exports},d979:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.onAddForm()}}},[e._v("新建菜单")]),a("a-dropdown",{attrs:{disabled:e.dropdowntop}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:function(t){return e.del_rule(e.checkedList)}}},[a("a-icon",{attrs:{type:"delete"}}),e._v("删除")],1),a("a-menu-item",{key:"2",on:{click:function(t){return e.lock_rule(e.checkedList,"hinder")}}},[a("a-icon",{attrs:{type:"lock"}}),e._v("锁定")],1),a("a-menu-item",{key:"3",on:{click:function(t){return e.lock_rule(e.checkedList,"normal")}}},[a("a-icon",{attrs:{type:"unlock"}}),e._v("启用")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{disabled:e.dropdowntop}},[e._v(" 批量操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1),a("a-spin",{staticStyle:{"min-height":"400px"},attrs:{spinning:e.loading,tip:"正在加载数据..."}},[a("a-icon",{staticStyle:{"font-size":"28px","margin-top":"-44px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),a("table",{staticClass:"table table-bordered table-hover",attrs:{width:"100%"}},[a("thead",[a("tr",[a("th",{attrs:{width:"5px"}},[a("a-checkbox",{attrs:{indeterminate:e.indeterminate,checked:e.checkAll},on:{change:e.onCheckAllChange}})],1),a("th",[e._v("ID")]),a("th",{staticStyle:{"text-align":"left"},attrs:{width:"15%"}},[e._v("菜单名称")]),a("th",[e._v("图标")]),a("th",[e._v("路由名称")]),a("th",[e._v("页面组件")]),a("th",[e._v("排序")]),a("th",[e._v("状态")]),a("th",{staticStyle:{"user-select":"none"},on:{click:e.showall}},[a("a",[a("a-icon",{style:{fontSize:"20px"},attrs:{type:e.showallstate?"up-square":"down-square"}})],1)]),a("th",[e._v("操作")])])]),a("draggable",{attrs:{tag:"tbody",list:e.datalist,handle:".handle"},on:{end:e.onEnd}},e._l(e.datalist,(function(t,i){return a("tr",{directives:[{name:"show",rawName:"v-show",value:1==t.haschild||1==t.ismenu||1==t.munshow,expression:"list.haschild==1||list.ismenu==1||list.munshow==1"}],key:t.id,class:{row_active_current:e.activeName==i},on:{click:function(a){return e.showDeviceByDiv(a,i,t.id)},dblclick:function(a){return e.onAddForm(t)}}},[a("td",[a("a-checkbox",{attrs:{checked:e.checkedList.indexOf(t.id)>-1,value:t.id},on:{change:e.onChange}})],1),a("td",[e._v(e._s(t.id))]),a("td",{staticStyle:{"text-align":"left"},domProps:{innerHTML:e._s(t.spacer+e.$t(t.title))}}),a("td",[t.icon?a("a-icon",{attrs:{type:t.icon}}):e._e()],1),a("td",[e._v(e._s(t.name))]),a("td",[e._v(e._s(t.component))]),a("td",[e._v(e._s(t.weigh))]),a("td",[a("a-tag",{staticStyle:{"user-select":"none"},attrs:{color:0==t.status?"blue":""}},[e._v(e._s(0==t.status?"启用中":"禁用中"))])],1),a("td",[a("a",{staticStyle:{"user-select":"none"}},[a("a-icon",{style:{fontSize:"20px",color:1==t.haschild&&1==t.ismenu?" ":"#595959"},attrs:{type:"cluster"},on:{click:function(a){return e.showchildren(t)}}})],1)]),a("td",[a("a-tag",{staticClass:"handle",staticStyle:{padding:"0"},attrs:{color:"#2c3e50"}},[a("a-icon",{style:{color:"#fff",fontSize:"18px"},attrs:{type:"drag"}})],1),a("span",{staticStyle:{"user-select":"none"}},[a("a",{on:{click:function(a){return e.onAddForm(t)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:e.$t("app.table.del.aq")},on:{confirm:function(){return e.del_rule([t.id])}}},[a("a",{attrs:{href:"javascript:;"}},[e._v(e._s(e.$t("app.table.del")))])])],1)],1)])})),0)],1),e.loading||e.datalist&&0!=e.datalist.length?e._e():a("div",{staticClass:"emptys"},[a("a-empty",{attrs:{description:e.resultdes}})],1)],1)],1)},r=[],s=(a("4de4"),a("a434"),a("d3b7"),a("8bf8")),n=a("b775");function l(){return Object(n["c"])({url:"auth/rule/getlist",method:"get",headers:{"Content-Type":"application/json;charset=UTF-8"}})}var o=a("b76a"),d=a.n(o),c=a("8ded"),u=a.n(c),h=a("4360"),p={name:"authrule",components:{draggable:d.a},data:function(){return{activeName:"",indeterminate:!0,checkAll:!1,checkedList:[],dropdowntop:!0,description:"分类：有在菜单显示的有点在页面操作",loading:!1,datalist:[],showallstate:!1,resultdes:"暂无数据",resultcode:null,layerid:"",cid:0}},watch:{checkedList:{handler:function(e,t){e.length>0?this.dropdowntop=!1:this.dropdowntop=!0},deep:!0}},filters:{},created:function(){this.loading=!0,this.getlist()},mounted:function(){Array.prototype.indexValue=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t}},methods:{onAddForm:function(e){this.layerid=this.$layer.iframe({content:{content:s["default"],parent:this,data:{data:e||null,cid:this.cid}},area:["900px","800px"],title:"添加/编辑菜单",maxmin:!0,shade:!1,shadeClose:!1,cancel:function(e){var t=u.a.get("layerid");t&&t.length>0&&(t=t.filter((function(t){return t!=e})),u.a.set("layerid",t,864e5))}})},reflesh:function(){this.getlist()},onChange:function(e){if(this.checkedList.indexOf(e.target.value)>-1){var t=this.checkedList.indexOf(e.target.value);t>-1&&this.checkedList.splice(t,1)}else this.checkedList.push(e.target.value);this.indeterminate=!!this.checkedList.length&&this.checkedList.length<this.datalist.length,this.checkAll=this.checkedList.length===this.datalist.length},onCheckAllChange:function(e){var t=[];if(e.target.checked)for(var a=0;a<this.datalist.length;a++)t.push(this.datalist[a].id);Object.assign(this,{checkedList:t,indeterminate:!1,checkAll:e.target.checked})},showchildren:function(e){var t=this.datalist.filter((function(t){return t.pid===e.id}));if(t.length>0)for(var a=0;a<t.length;a++)1==t[a].munshow?this.$set(this.datalist[this.datalist.indexValue(t[a])],"munshow",0):this.$set(this.datalist[this.datalist.indexValue(t[a])],"munshow",1)},showall:function(){if(this.showallstate){this.showallstate=!1;var e=this.datalist.filter((function(e){return 0!=e.pid}));if(e.length>0)for(var t=0;t<e.length;t++)this.$set(this.datalist[this.datalist.indexValue(e[t])],"munshow",0)}else{this.showallstate=!0;var a=this.datalist.filter((function(e){return 0!=e.pid}));if(a.length>0)for(t=0;t<a.length;t++)this.$set(this.datalist[this.datalist.indexValue(a[t])],"munshow",1)}},onEnd:function(e){for(var t=e.newIndex,a=(e.oldIndex,[]),i=0;i<this.datalist.length;i++)a.push(this.datalist[i].id);var r=this.datalist[t];this.orrdersave(a,r.id,r.pid)},orrdersave:function(e,t,a){var i=this;e&&t&&(this.loading=!0,this.$request({url:"/common/table/weigh",method:"post",data:{ids:e,changeid:t,field:"weigh",table:"admin_auth_rule",prikey:"id",pid:a,orderway:"asc"}}).then((function(e){i.getlist(),i.$nextTick((function(){i.upmenu()}))})).catch((function(e){i.$message.error("服务器错误")})).finally((function(){i.loading=!1})))},getlist:function(){var e=this;this.loading=!0,l().then((function(t){0==t.code?t.data&&(e.datalist=t.data):(e.datalist=[],e.resultdes=t.msg)})).catch((function(e){})).finally((function(){e.loading=!1}))},del_rule:function(e){var t=this,a=this.$message.loading("删除中，请稍后...",0);this.$request({url:"auth/rule/del",method:"delete",data:{ids:e}}).then((function(e){0==e.code?(t.$message.success(e.msg),t.getlist()):t.$message.error(e.msg)})).catch((function(e){t.$message.error("网络错误，请稍后再试")})).finally((function(){setTimeout(a,1)}))},lock_rule:function(e,t){var a=this,i="启用";"hinder"==t&&(i="禁用");var r=this.$message.loading(i+"中，请稍后...",0);this.$request({url:"/auth.rule/lock",method:"post",data:{ids:e,status:t}}).then((function(e){0==e.code?(a.$message.success(e.msg),a.getlist()):a.$message.error(e.msg)})).catch((function(e){a.$message.error("网络错误，请稍后再试")})).finally((function(){setTimeout(r,1)}))},showDeviceByDiv:function(e,t,a){this.activeName=t,this.cid=a},upmenu:function(){h["a"].dispatch("GetInfo").then((function(e){h["a"].dispatch("GenerateRoutes",{roles:e}).then((function(){}))})).catch((function(e){notification.error({message:"错误",description:"请求用户信息失败，请重试，"+e})}))}},beforeRouteLeave:function(e,t,a){var i=u.a.get("layerid");if(i&&i.length>0)for(var r in i)try{this.$layer.min(i[r])}catch(s){continue}a()}},m=p,f=(a("8080"),a("2877")),v=Object(f["a"])(m,i,r,!1,null,"77b5d702",null);t["default"]=v.exports},ea22:function(e,t,a){}}]);