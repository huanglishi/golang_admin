(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba538150"],{"17f1":function(e,a,r){"use strict";r("ea22")},"8bf8":function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"layerbox"},[r("a-spin",{attrs:{spinning:e.confirmLoading}},[r("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",{staticClass:"roiders",attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"选择父级","has-feedback":""}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pid",{rules:[{required:!0,message:"请输入至少1个字符的菜单名称！"}]}],expression:"['pid', {rules: [{required: true, message: '请输入至少1个字符的菜单名称！'}]}]"}],attrs:{placeholder:"选择上一级菜单"}},[r("a-select-option",{key:0,attrs:{value:0}},[e._v("无")]),e._l(e.list,(function(a){return r("a-select-option",{key:a.id,attrs:{value:a.id}},[r("span",{domProps:{innerHTML:e._s(a.title_txt)}})])}))],2)],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"是否为菜单",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["ismenu"],expression:"['ismenu']"}],on:{change:e.onIsmenu}},[r("a-radio",{attrs:{value:0}},[e._v("不是")]),r("a-radio",{attrs:{value:1}},[e._v("是")])],1)],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}]},[r("a-radio",{attrs:{value:"menu"}},[e._v("菜单")]),r("a-radio",{attrs:{value:"file"}},[e._v("权限节点")])],1)],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"标题（title）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,min:1,message:"请输入至少1个字符的菜单名称！"}]}],expression:"['title', {rules: [{required: true, min: 1, message: '请输入至少1个字符的菜单名称！'}]}]"}]})],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"路由名（name）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{pattern:/^[A-Za-z0-9_\-]+$/gi,required:!0,message:"输入只能是数字、字母、下划线"}]}],expression:"['name', {rules: [{pattern: /^[A-Za-z0-9_\\-]+$/ig,required: true, message: '输入只能是数字、字母、下划线'}]}]"}]})],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"页面组件（component）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["component",{rules:[{pattern:/^[A-Za-z0-9_\-_\/_@]+$/gi,message:"输入只能是数字、字母、下划线"}]}],expression:"['component', {rules: [\n          {pattern: /^[A-Za-z0-9_\\-_\\/_@]+$/ig, message: '输入只能是数字、字母、下划线'}]}]"}]})],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"重定向（redirect）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["redirect",{rules:[{pattern:/^[A-Za-z0-9_\-_\/_@]+$/gi,message:"输入只能是数字、字母、下划线"}]}],expression:"['redirect', {rules: [\n          {pattern: /^[A-Za-z0-9_\\-_\\/_@]+$/ig, message: '输入只能是数字、字母、下划线'}]}]"}]})],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"图标（icon）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{rules:[{pattern:/^[A-Za-z0-9_\-_-]+$/gi,message:"输入只能是数字、字母、下划线"}]}],expression:"['icon', {rules: [{pattern: /^[A-Za-z0-9_\\-_-]+$/ig, message: '输入只能是数字、字母、下划线'}]}]"}]})],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"页面是否缓存",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["keepAlive"],expression:"['keepAlive']"}]},[r("a-radio",{attrs:{value:0}},[e._v("不需缓存")]),r("a-radio",{attrs:{value:1}},[e._v("缓存")])],1)],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"子路由（hideHeader）",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hideHeader"],expression:"['hideHeader']"}]},[r("a-radio",{attrs:{value:1}},[e._v("设置")]),r("a-radio",{attrs:{value:0}},[e._v("不设置")])],1)],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"hiddenHeaderContent",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"隐藏 PageHeader 组件中的页面带的 面包屑和页面标题栏"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hiddenHeaderContent"],expression:"['hiddenHeaderContent']"}]},[r("a-radio",{attrs:{value:1}},[e._v("设置")]),r("a-radio",{attrs:{value:0}},[e._v("不设置")])],1)],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"子路由hideChildrenInMenu",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"用于隐藏不需要在菜单中展示的子路由。用法可以查看 个人设置 的配置"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hideChildrenInMenu"],expression:"['hideChildrenInMenu']"}]},[r("a-radio",{attrs:{value:1}},[e._v("设置")]),r("a-radio",{attrs:{value:0}},[e._v("不设置")])],1)],1),r("a-form-item",{staticClass:"roiders",attrs:{label:"子路由（hidden）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"控制路由和子路由是否显示在 sidebar"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hidden"],expression:"['hidden']"}]},[r("a-radio",{attrs:{value:1}},[e._v("设置")]),r("a-radio",{attrs:{value:0}},[e._v("不设置")])],1)],1),r("a-form-item",{staticClass:"roiders",attrs:{label:e.$t("form.basic-form.remark"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:"3",placeholder:e.$t("form.basic-form.remark")}})],1),r("a-form-item",{staticStyle:{"text-align":"center","margin-top":"12px"},attrs:{wrapperCol:{span:24}}},[r("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v(e._s(e.$t("form.basic-form.form.submit")))]),r("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.onReset}},[e._v(e._s(e.$t("form.basic-form.form.reset")))])],1)],1)],1)],1)},i=[],l=(r("b0c0"),r("d3b7"),r("4de4"),r("8ded")),o=r.n(l),s=r("4360"),n={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),list:[],savedata:{pid:null,type:"menu",ismenu:1,title:"",name:"",component:"",redirect:"",icon:"",keepAlive:0,hideHeader:0,hiddenHeaderContent:0,hideChildrenInMenu:0,hidden:0,remark:""},id:0,all_layerid:[]}},props:{layerid:{type:String,default:""},lydata:{type:Object,default:function(){return{}}},lyoption:{type:Object,default:function(){return{}}}},created:function(){var e=this;if(this.getdata(),this.lydata.data){var a=this.lydata.data;this.$nextTick((function(){e.id=a.id,e.form.setFieldsValue({pid:a.pid,type:a.type,ismenu:a.ismenu,title:a.title,name:a.name,component:a.component,redirect:a.redirect,icon:a.icon,keepAlive:a.keepAlive,hideHeader:a.hideHeader,hiddenHeaderContent:a.hiddenHeaderContent,hideChildrenInMenu:a.hideChildrenInMenu,hidden:a.hidden,remark:a.remark})}))}else{var r=0;this.lydata.cid>0&&(r=this.lydata.cid),this.$nextTick((function(){e.form.setFieldsValue({pid:r,type:"menu",ismenu:1,title:"",name:"",component:"",redirect:"",icon:"",keepAlive:0,hideHeader:0,hiddenHeaderContent:0,hideChildrenInMenu:0,hidden:0,remark:""})}))}this.all_layerid=o.a.get("layerid"),this.all_layerid||(this.all_layerid=[]),this.all_layerid.push(this.layerid),o.a.set("layerid",this.all_layerid,864e5)},methods:{getdata:function(){var e=this;this.$request({url:"/auth/rule/getparent",method:"get"}).then((function(a){e.list=a.data})).catch((function(e){})).finally((function(){}))},onReset:function(){this.form.resetFields(),this.form.setFieldsValue({pid:0,type:"menu",ismenu:1,title:"",name:"",component:"",redirect:"",icon:"",keepAlive:0,hideHeader:0,hiddenHeaderContent:0,hideChildrenInMenu:0,hidden:0,remark:""})},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,r){e||(a.confirmLoading=!0,r["id"]=a.id,a.$request({url:"/auth/rule/add",method:"post",data:r}).then((function(e){0==e.code?(a.$message.success(e.msg),a.upmenu(),a.$layer.close(a.layerid),a.all_layerid&&a.all_layerid.length>0&&(a.all_layerid=a.all_layerid.filter((function(e){return e!=a.layerid})),o.a.set("layerid",a.all_layerid,864e5)),a.$parent.reflesh()):a.$message.error(e.msg)})).catch((function(e){})).finally((function(){a.confirmLoading=!1})))}))},upmenu:function(){s["a"].dispatch("GetInfo").then((function(e){s["a"].dispatch("GenerateRoutes",{roles:e}).then((function(){}))})).catch((function(e){notification.error({message:"错误",description:"请求用户信息失败，请重试，"+e})}))},onIsmenu:function(e){0==e.target.value?this.form.setFieldsValue({type:"file"}):this.form.setFieldsValue({type:"menu"})}}},d=n,p=(r("17f1"),r("2877")),c=Object(p["a"])(d,t,i,!1,null,"6eb2f106",null);a["default"]=c.exports},ea22:function(e,a,r){}}]);